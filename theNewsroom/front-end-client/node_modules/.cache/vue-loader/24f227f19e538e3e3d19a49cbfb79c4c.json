{"remainingRequest":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/src/views/Topics.vue?vue&type=style&index=0&id=26c88c44&scoped=true&lang=css&","dependencies":[{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/src/views/Topics.vue","mtime":1605530430615},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgp0ZCB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDsKfQoKLmxpc3QtdGl0bGUgewogICAgZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7Cn0KCi5pdGVtIHsKICAgIG1hcmdpbjogNXB4OwogICAgYm9yZGVyLXJhZGl1czogNHB4Owp9CgouaXRlbTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiBnaG9zdHdoaXRlOwp9Cg=="},{"version":3,"sources":["Topics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Topics.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div class=\"topics\">\n    <template>\n        <v-container fluid>\n\n            <v-layout wrap>\n                <v-flex xs12 md4>\n                    <v-card flat tile width='100%'>\n                        <v-list flat rounded dense>\n                            <v-list-group value=\"true\" color=\"none\">\n                                <template v-slot:activator>\n                                    <v-list-item-content>\n                                        <v-list-item-title class='font-weight-light list-title'>Filters </v-list-item-title>\n                                    </v-list-item-content>\n                                </template>\n                                <!-- Search -->\n                                <v-list-item>\n                                    <v-text-field @keyup.enter.native=\"searchTopic\" dense rounded filled v-model=\"keyword\" append-icon=\"mdi-magnify\" label=\"Search for a topic\" single-line hide-details />\n                                    <Search v-model=\"search\" />\n                                </v-list-item>\n                                <!-- Calendar -->\n                                <v-list-item>\n                                    <v-menu ref=\"menu\" v-model=\"menu\" :close-on-content-click=\"false\" :return-value.sync=\"dates\" transition=\"scale-transition\" offset-y min-width=\"290px\">\n                                        <template v-slot:activator=\"{ on, attrs }\">\n                                            <v-text-field dense rounded filled v-model=\"dateRange\" label=\"Select time period\" append-icon=\"mdi-calendar\" single-line hide-details readonly v-bind=\"attrs\" v-on=\"on\" />\n                                        </template>\n                                        <v-date-picker v-model=\"dates\" :max='todaysDate' range no-title scrollable>\n                                            <v-spacer />\n                                            <v-btn text color=\"primary\" @click=\"saveDates\">\n                                                OK\n                                            </v-btn>\n                                        </v-date-picker>\n                                    </v-menu>\n                                </v-list-item>\n                                <!-- Media selection -->\n                                <v-list-item>\n                                    <v-text-field dense rounded filled v-model=\"media\" append-icon=\"mdi-book-open-variant\" label=\"Filter by media outlet\" single-line hide-details />\n                                </v-list-item>\n                            </v-list-group>\n                            <v-list-item>\n                                <v-spacer />\n                                <v-btn rounded depressed @click=\"reset\">\n                                    Reset </v-btn>\n                                <HelpTopics />\n                            </v-list-item>\n                        </v-list>\n                    </v-card>\n                    <v-spacer />\n                </v-flex>\n                <v-spacer />\n                <v-flex align-center xs12 md8>\n                    <!-- At the moment, topics are shown in a data table with rows that contain a topic's name and number of articles. Datatables allow us with a lot of options for sorting and presenting data, and are more scalable for different screen resolutions than other data presentation methods -->\n                    <v-data-table :mobile-breakpoint=\"0\" :headers=\"headers\" :items=\"topics\" :sort-by=\"['topicofarticlesByTopicId.totalCount']\" :sort-desc=\"[true]\">\n                        <template v-slot:item=\"{ item }\">\n                            <tr @click=\"rowClicked(item)\">\n                                <td> {{item.topicofarticlesByTopicId.totalCount}} </td>\n                                <td>{{item.name}}</td>\n                            </tr>\n                        </template>\n                    </v-data-table>\n                </v-flex>\n                <Popup v-model=\"popup\" />\n                <v-col />\n            </v-layout>\n        </v-container>\n    </template>\n</div>\n</template>\n\n<script>\nimport Popup from \"../components/common/Popup\"\nimport HelpTopics from \"../components/common/HelpTopics\"\nimport Search from \"../components/common/Search\"\nimport ALL_TOPICS_WITH_FILTER from '../graphql/TopicsAndArticleCount.gql'\nimport {\n    mapMutations\n} from 'vuex';\n\nexport default {\n    name: \"Topics\",\n    components: {\n        Popup,\n        HelpTopics,\n        Search\n    },\n\n    data: () => ({\n        search: false,\n        popup: false,\n        start_date: null,\n        end_date: null,\n        dates: [],\n        keyword: '',\n        menu: false,\n        media: '',\n        sortDesc: true,\n        headers: [{\n                text: '# Articles',\n                value: 'topicofarticlesByTopicId.totalCount',\n                width: \"30%\",\n                align: 'center',\n            },\n            {\n                text: 'Topic',\n                value: 'name',\n                width: \"100%\",\n                align: 'center',\n            }\n        ],\n        topics: [],\n\n    }),\n    apollo: {\n        topics: {\n            query: ALL_TOPICS_WITH_FILTER,\n            variables() {\n                return {\n                        media: this.media,\n                        from: this.start_date,\n                        to: this.end_date,\n                }\n            },\n            update(data) {\n                return data.allTopics.nodes;\n            }\n        }\n    },\n    methods: {\n        ...mapMutations([\n            'openTopic',\n            'searchTopicKeyword'\n        ]),\n        formatDate(date) {\n            let month = `${date.getMonth() + 1}`;\n            let day = `${date.getDate()}`;\n            const year = date.getFullYear();\n            if (month.length < 2) month = `0${month}`;\n            if (day.length < 2) day = `0${day}`;\n            return [year, month, day].join('-');\n        },\n        rowClicked(topic) {\n            this.open(topic)\n            console.log(topic);\n        },\n        open(topic) {\n            this.popup = true\n            this.openTopic(topic)\n        },\n        saveDates() {\n            this.$refs.menu.save(this.dates)\n            if (this.dates[0] < this.dates[1]) {\n                this.start_date = this.dates[0]\n                this.end_date = this.dates[1]\n            } else {\n                this.start_date = this.dates[1]\n                this.end_date = this.dates[0]\n            }\n            this.dates = [this.start_date, this.end_date]\n\n        },\n        searchTopic() {\n            if (this.keyword != '') {\n                this.search = true\n                this.searchTopicKeyword(this.keyword)\n            }\n        },\n        reset() {\n            this.end_date = new Date()\n            this.start_date = new Date()\n            this.start_date.setMonth(this.end_date.getMonth() - 1)\n\n            this.start_date = this.start_date.toISOString().slice(0, 10)                    \n            this.end_date = this.end_date.toISOString().slice(0, 10)\n            this.dates = [this.start_date, this.end_date]\n            this.media = ''\n        }\n    },\n     mounted: function() {\n        this.reset()\n        console.log(\"Mounted.\")\n    },\n    computed: {\n        todaysDate() {\n            const today = new Date();\n            return this.formatDate(today);\n        },\n        dateRange() {\n            return this.dates.join(' to ')\n        },\n    },\n}\n</script>\n\n<style scoped>\ntd {\n    text-align: center !important;\n}\n\n.list-title {\n    font-size: 16px !important;\n}\n\n.item {\n    margin: 5px;\n    border-radius: 4px;\n}\n\n.item:hover {\n    background: ghostwhite;\n}\n</style>\n"]}]}