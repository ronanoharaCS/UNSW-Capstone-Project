{"remainingRequest":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/src/components/common/Header.vue?vue&type=style&index=0&id=1f234af1&scoped=true&lang=css&","dependencies":[{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/src/components/common/Header.vue","mtime":1605511148966},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudi10b29sYmFyLnYtdG9vbGJhci0tYWJzb2x1dGUgewogICAgd2lkdGg6IGF1dG87CiAgICBoZWlnaHQ6IGF1dG87Cn0K"},{"version":3,"sources":["Header.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA","file":"Header.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n<v-toolbar class=\"toolbar\" fixed flat max-height=\"65\" dark>\n    <v-btn text>\n        <v-toolbar-title class=\"text-uppercase\">\n            <router-link to=\"/\">\n                <span class=\"font-weight-light white--text\">The</span>\n                <span class=\"white--text\">Newsroom</span>\n            </router-link>\n        </v-toolbar-title>\n    </v-btn>\n    <v-spacer />\n\n    <!-- Full screen size -->\n    <v-toolbar-items class=\"d-none d-md-block\">\n        <v-btn text depressed to='/topics'>Topics</v-btn>\n        <v-btn text depressed to='/trends'>Trends</v-btn>\n        <v-btn text depressed v-if=\"!$auth.loading && !$auth.isAuthenticated\" @click=\"login\">Log In / Register</v-btn>\n        <v-btn v-if=\"!$auth.loading && $auth.isAuthenticated\" depressed to='/saved'>Saved</v-btn>\n        <v-btn v-if=\"!$auth.loading && $auth.isAuthenticated\" text depressed @click=\"logout\">Log Out</v-btn>\n\n    </v-toolbar-items>\n\n    <!-- Small screen size -->\n    <div class=\"d-md-none\">\n        <v-menu>\n            <template v-slot:activator=\"{ on }\">\n                <v-app-bar-nav-icon v-on=\"on\" />\n            </template>\n            <v-list class=\"responsiveMenu\" size=\"auto\">\n                <v-list-item text v-for=\"item in menu\" :key=\"item.icon\" :to=\"item.route\" depressed v-text='item.title' />\n                <template v-if=\"!$auth.loading && !$auth.isAuthenticated\">\n                    <v-list-item text @click=\"login\">\n                        Log In\n                    </v-list-item>\n                    <v-list-item text @click=\"login\">\n                        Register\n                    </v-list-item>\n                </template>\n                <template v-else>\n                    <v-list-item text to='/saved'>\n                        Saved\n                    </v-list-item>\n                    <v-list-item text @click=\"logout\">\n                        Log Out\n                    </v-list-item>\n                </template>\n            </v-list>\n        </v-menu>\n    </div>\n\n</v-toolbar>\n</template>\n\n<script>\nimport CREATE_USER from '../../graphql/createUser.gql'\nimport CHECK_USER from '../../graphql/checkUser.gql'\n\nexport default {\n    name: \"Header\",\n    data: () => ({\n        auth: true,\n        drawer: false,\n        saved: {\n            icon: 'saved',\n            title: 'Saved Trends',\n            route: '/saved'\n        },\n        menu: [{\n                icon: 'topics',\n                title: 'Topics',\n                route: '/topics'\n            },\n            {\n                icon: 'trends',\n                title: 'Trends',\n                route: '/trends'\n            },\n        ]\n    }),\n    apollo: {\n        user : {\n            query: CHECK_USER,\n            variables() {\n                return {\n                    userId: this.$auth.user.sub\n                }\n            },\n            update(data) {\n                return data;\n            },\n            skip() {\n                return this.skipQuery\n            },\n        }\n    },\n    methods: {\n        async createUser() {\n            var userId = this.$auth.user.sub\n            this.$apollo.queries.user.skip = false\n            await this.$apollo.queries.user.refetch()\n            if (this.user.allUsers.nodes.length == 0) {\n                this.$apollo.mutate({\n                    mutation: CREATE_USER,\n                    variables: {\n                        userId\n                    }\n                })\n                console.log(\"New User: \", userId)\n            } else {\n                console.log(\"Existing User: \", userId)\n            }\n            \n        },\n        async login() {\n            await this.$auth.loginWithPopup();\n            this.createUser();\n        },\n        logout() {\n            this.$auth.logout({\n                returnTo: window.location.origin\n            });\n        }\n    },\n    \n}\n</script>\n\n<style scoped>\n.v-toolbar.v-toolbar--absolute {\n    width: auto;\n    height: auto;\n}\n</style>\n"]}]}