{"remainingRequest":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/src/views/Saved.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/src/views/Saved.vue","mtime":1605525146601},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQb3B1cCBmcm9tICIuLi9jb21wb25lbnRzL2NvbW1vbi9Qb3B1cCI7CmltcG9ydCBIZWxwU2F2ZWQgZnJvbSAiLi4vY29tcG9uZW50cy9jb21tb24vSGVscFNhdmVkIjsKaW1wb3J0IFVTRVJfQ09ORklHUyBmcm9tICIuLi9ncmFwaHFsL0FsbE9mQVVzZXJzQ29uZmlndXJhdGlvbnMuZ3FsIgppbXBvcnQgREVMRVRFX1VTRVJfQ09ORklHIGZyb20gIi4uL2dyYXBocWwvZGVsZXRlVXNlckNvbmZpZ3VyYXRpb24uZ3FsIgppbXBvcnQgREVMRVRFX1RPUElDX0NPTkZJRyBmcm9tICIuLi9ncmFwaHFsL2RlbGV0ZVRvcGljQ29uZmlndXJhdGlvbi5ncWwiCgoKaW1wb3J0IHsKICAgIG1hcE11dGF0aW9ucywKICAgIG1hcEdldHRlcnMKfSBmcm9tICd2dWV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJUb3BpY3MiLAogICAgY29tcG9uZW50czogewogICAgICAgIFBvcHVwLAogICAgICAgIEhlbHBTYXZlZAogICAgfSwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgdHJlbmQ6IHsKICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICB0b3BpY3M6IFtdCiAgICAgICAgfSwKICAgICAgICBkaWFsb2c6IGZhbHNlLAogICAgICAgIHBvcHVwOiBmYWxzZSwKICAgICAgICB1c2VySWQ6ICcnLAogICAgICAgIGNvbmZpZ3M6IFtdLAogICAgICAgIHNraXBRdWVyeTogZmFsc2UKICAgIH0pLAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBHZXR0ZXJzKFsnbnVtU2VsZWN0ZWQnLCAnZ2V0U2VsZWN0ZWQnLCAnZ2V0UmVsYXRlZCddKSwKCiAgICB9LAogICAgYXBvbGxvOiB7CiAgICAgICAgY29uZmlnczogewogICAgICAgICAgICBxdWVyeTogVVNFUl9DT05GSUdTLAogICAgICAgICAgICB2YXJpYWJsZXMoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHVzcklkOiB0aGlzLiRhdXRoLnVzZXIuc3ViCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZShkYXRhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5hbGxVc2VyY29uZmlndXJhdGlvbnMubm9kZXMubWFwKGEgPT4gKHsKICAgICAgICAgICAgICAgICAgICBpZDogYS5pZCwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogYS5jb25maWdOYW1lLAogICAgICAgICAgICAgICAgICAgIHRvcGljczogYS50b3BpY2NvbmZpZ3VyYXRpb25zQnlVc3JDb25maWdJZC5ub2Rlcy5tYXAoYiA9PiAoewogICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IGIuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBiLnRvcGljSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGIudG9waWNOYW1lCiAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2tpcCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNraXBRdWVyeQogICAgICAgICAgICB9LAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwTXV0YXRpb25zKFsKICAgICAgICAgICAgJ29wZW5Ub3BpYycsCiAgICAgICAgICAgICdzZXRTZWxlY3RlZCcsCiAgICAgICAgXSksCiAgICAgICAgb3Blbih0aXRsZSkgewogICAgICAgICAgICB0aGlzLnBvcHVwID0gdHJ1ZQogICAgICAgICAgICB0aGlzLm9wZW5Ub3BpYyh0aXRsZSkKICAgICAgICB9LAogICAgICAgIHZpZXdUcmVuZHMoc2VsZWN0aW9uKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGVjdGlvbikKCiAgICAgICAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5tYXAoYSA9PiAoewogICAgICAgICAgICAgICAgICAgIGlkOiBhLmlkLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IGEubmFtZQogICAgICAgICAgICAgICAgfSkpCgogICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKHNlbGVjdGlvbikKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogJ3RyZW5kcycKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldENvbmZpZ3MoKSB7CiAgICAgICAgICAgIHRoaXMuJGFwb2xsby5xdWVyaWVzLmNvbmZpZ3Muc2tpcCA9IGZhbHNlCiAgICAgICAgICAgIGF3YWl0IHRoaXMuJGFwb2xsby5xdWVyaWVzLmNvbmZpZ3MucmVmZXRjaCgpCiAgICAgICAgfSwKICAgICAgICBhc3luYyBkZWxldGVUcmVuZChzZWxlY3Rpb24pIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkRlbGV0aW5nIHNhdmVkIGNvbmdpZnVyYXRpb24uLi4iKQogICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZVRvcGljQ29uZmlnKHNlbGVjdGlvbi50b3BpY3MpCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlVXNlckNvbmZpZyhzZWxlY3Rpb24uaWQpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTYXZlZCBjb25naWZ1cmF0aW9uIGRlbGV0ZWQiKQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZGVsZXRlVG9waWNDb25maWcodG9waWNzKSB7CiAgICAgICAgICAgIHZhciBpCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b3BpY3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBpZCA9IHRvcGljc1tpXS5ub2RlSWQKICAgICAgICAgICAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgICAgICAgICAgICAgIG11dGF0aW9uOiBERUxFVEVfVE9QSUNfQ09ORklHLAogICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICAgICAgICAgICAgICBpZCwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBkZWxldGVVc2VyQ29uZmlnKGlkKSB7CiAgICAgICAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgICAgICAgICAgbXV0YXRpb246IERFTEVURV9VU0VSX0NPTkZJRywKICAgICAgICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICAgICAgICAgIGlkLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHVwZGF0ZTogKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29uZmlncygpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZDogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5nZXRDb25maWdzKCkKICAgIH0sCn0K"},{"version":3,"sources":["Saved.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Saved.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div class=\"saved\">\n<template>\n\n    <v-container fluid>\n        <h2 class=\"subheading grey--text text-center\" v-if=\"configs.length == 0\">Looks like you haven't saved any Trends yet! You can save a selection of topics on the Trends page.</h2>\n        <v-row v-else>\n            <v-list two-line width=100% rounded>\n                <v-list-item>\n                    <HelpSaved />\n                    <span> Need Help?</span>\n\n                </v-list-item>\n                <v-list-item  class=\"item\" v-for=\"config in configs\" :key=\"config.id\" depressed hover @click.stop=\"viewTrends(config.topics)\">\n\n                    <v-col d-flex>\n                        <v-list-item-title class=\"headline\" v-text=\"config.title\" />\n                        <v-card-actions>\n                            <v-row dense>\n                                <!-- We would need ot make sure we limit the number of characters shown -->\n                                <v-col v-for=\"topic in config.topics\" :key=\"topic.id\">\n                                    <v-btn dark rounded width=100% depressed @click.stop=\"open(topic)\" v-text='topic.name' />\n                                </v-col>\n                            </v-row>\n                            <v-col class=\"edit\" dense>\n                                    <v-btn outlined text rounded width=100% depressed @click.stop=\"deleteTrend(config)\">\n                                        Delete\n                                    </v-btn>\n                            </v-col>\n                        </v-card-actions>\n                    </v-col>\n                </v-list-item>\n            </v-list>\n        </v-row>\n        <Popup v-model=\"popup\" />\n    </v-container>\n</template>\n</div>\n</template>\n\n<script>\nimport Popup from \"../components/common/Popup\";\nimport HelpSaved from \"../components/common/HelpSaved\";\nimport USER_CONFIGS from \"../graphql/AllOfAUsersConfigurations.gql\"\nimport DELETE_USER_CONFIG from \"../graphql/deleteUserConfiguration.gql\"\nimport DELETE_TOPIC_CONFIG from \"../graphql/deleteTopicConfiguration.gql\"\n\n\nimport {\n    mapMutations,\n    mapGetters\n} from 'vuex';\n\nexport default {\n    name: \"Topics\",\n    components: {\n        Popup,\n        HelpSaved\n    },\n    data: () => ({\n        trend: {\n            title: '',\n            topics: []\n        },\n        dialog: false,\n        popup: false,\n        userId: '',\n        configs: [],\n        skipQuery: false\n    }),\n    computed: {\n        ...mapGetters(['numSelected', 'getSelected', 'getRelated']),\n\n    },\n    apollo: {\n        configs: {\n            query: USER_CONFIGS,\n            variables() {\n                return {\n                    usrId: this.$auth.user.sub\n                }\n            },\n            update(data) {\n                return data.allUserconfigurations.nodes.map(a => ({\n                    id: a.id,\n                    title: a.configName,\n                    topics: a.topicconfigurationsByUsrConfigId.nodes.map(b => ({\n                        nodeId: b.id,\n                        id: b.topicId,\n                        name: b.topicName\n                    }))\n                }))\n            },\n            skip() {\n                return this.skipQuery\n            },\n        }\n    },\n    methods: {\n        ...mapMutations([\n            'openTopic',\n            'setSelected',\n        ]),\n        open(title) {\n            this.popup = true\n            this.openTopic(title)\n        },\n        viewTrends(selection) {\n            console.log(selection)\n\n            selection = selection.map(a => ({\n                    id: a.id,\n                    name: a.name\n                }))\n\n            this.setSelected(selection)\n            this.$router.push({\n                name: 'trends'\n            })\n        },\n        async getConfigs() {\n            this.$apollo.queries.configs.skip = false\n            await this.$apollo.queries.configs.refetch()\n        },\n        async deleteTrend(selection) {\n            console.log(\"Deleting saved congifuration...\")\n            await this.deleteTopicConfig(selection.topics)\n            await this.deleteUserConfig(selection.id)\n            console.log(\"Saved congifuration deleted\")\n        },\n        async deleteTopicConfig(topics) {\n            var i\n            for (i = 0; i < topics.length; i++) {\n                var id = topics[i].nodeId\n                this.$apollo.mutate({\n                    mutation: DELETE_TOPIC_CONFIG,\n                    variables: {\n                        id,\n                    }\n                })\n            }\n        },\n        async deleteUserConfig(id) {\n            this.$apollo.mutate({\n                mutation: DELETE_USER_CONFIG,\n                variables: {\n                    id,\n                },\n                update: () => {\n                    this.getConfigs()\n                },\n            })\n        },\n    },\n    mounted: function() {\n        this.getConfigs()\n    },\n}\n</script>\n\n<style scoped>\ntd {\n    text-align: center !important;\n}\n.saved {\n    padding-top: 20px\n}\n.edit {\n    max-width: 150px;\n}\n.item {\n    background: rgb(230, 235, 255);\n}\n.item:hover {\n    background:rgb(222, 229, 255);\n}\n</style>"]}]}