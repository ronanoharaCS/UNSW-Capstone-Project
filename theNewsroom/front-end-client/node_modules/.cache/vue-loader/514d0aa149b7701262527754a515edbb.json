{"remainingRequest":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/src/views/Home.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/src/views/Home.vue","mtime":1605526282881},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jYXJkLW91dHRlciB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBwYWRkaW5nLWJvdHRvbTogNTBweDsKfQouY2FyZC1hY3Rpb25zIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKCiAgICBib3R0b206IDA7Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div class=\"home\">\n    <v-container fluid>\n        <v-col>\n            <v-list-item>\n                <v-text-field @keyup.enter.native=\"searchTopic\" dense rounded filled v-model=\"keyword\" append-icon=\"mdi-magnify\" label=\"Looking for a specific topic?\" single-line hide-details />\n                <Search v-model=\"search\" />\n            </v-list-item>\n        </v-col>\n        <v-row>\n            <!-- Topic of the Day -->\n            <v-col   cols=\"12\" md='6'>\n                <v-card  color='rgb(230, 235, 255)' class=\"flex-wrap text-justify justify-space-between\" height=\"100%\" width=\"100%\" hover @click=\"open(totd)\">\n                    <v-card-title class=\"headline\">Topic of the Day</v-card-title>\n                    <v-spacer/>\n                    <v-card-text class=\"text-center font-weight-bold\" v-resize-text v-text='totd.topicname' />\n                    <v-card-text class='text-center'> {{totd.numofarticles}} articles</v-card-text>\n                </v-card>\n                <Popup v-model=\"popup\" />\n            </v-col>\n\n            <!-- Login/Register/Saved -->\n            <v-col   cols=\"12\" md='6'>\n                <!-- Show login/register when user is not authenticated -->\n                <v-card  color='rgb(230, 235, 255)' v-if=\"!$auth.loading && !$auth.isAuthenticated\" class=\"flex-wrap text-justify justify-space-between\" height=\"100%\" width=\"100%\" hover @click.stop=\"login\">\n                    <v-card-title class=\"headline\" v-text=\"unauth.title\" />\n                    <v-card-text >{{unauth.text}}</v-card-text>\n                    <v-card-text class='text-center'> <strong>{{unauth.second_text}}</strong></v-card-text>\n                </v-card>\n\n                <!-- show saved/logout when user is authenticated -->\n                <v-card  color='rgb(230, 235, 255)' v-else class=\"flex-wrap text-justify justify-space-between\" height=\"100%\" hover :to='saved.route'>\n                    <v-card-title class=\"headline\" v-text=\"saved.title\" />\n                    <v-card-text v-text='saved.text' />\n                    <v-card-text class='text-center'> <strong>{{saved.second_text}}</strong></v-card-text>\n                </v-card>\n            </v-col>\n\n            <!-- Topics/Trends -->\n            <v-col dark v-for=\"card in cards\" :key=\"card.id\"   cols=\"12\" md='6'>\n                <v-card  color='rgb(230, 235, 255)' class=\" flex-wrap text-justify justify-space-between\" rounded height=\"100%\" width=\"100%\" hover :to='card.route'>\n                    <v-card-title class=\"headline\" v-text=\"card.title\" />\n                    <v-card-text> {{card.text}} </v-card-text>\n                    <v-card-text class='text-center'> <strong>{{card.second_text}}</strong> </v-card-text>\n                </v-card>\n            </v-col>\n        </v-row>\n    </v-container>\n</div>\n</template>\n\n<script>\nimport Popup from \"../components/common/Popup\";\nimport Search from \"../components/common/Search\";\n\nimport CREATE_USER from '../graphql/createUser.gql'\nimport CHECK_USER from '../graphql/checkUser.gql'\nimport GET_TOP_TOPIC from '../graphql/GetTopTopic.gql'\nimport {\n    mapMutations\n} from 'vuex';\n\nexport default {\n    name: \"Home\",\n    components: {\n        Popup,\n        Search\n    },\n\n    data() {\n        return {\n            skipQuery: false,\n            user_id: '',\n            user: null,\n            popup: false,\n            keyword: '',\n            search: false,\n            absolute: true,\n            opacity: 10,\n            overlay: false,\n            unauth: {\n                id: 'unreg',\n                title: 'Log in for additional features!',\n                text: ' Register an account or log in to get access to additional features, such as selecting more topics on your Trends graph and saving topics for later!',\n                second_text: 'Click to Register or Log In!',\n\n                route: '/register'\n            },\n            saved: {\n\n                id: 'saved',\n                title: 'My Saved Trends',\n                text: 'Click here to view your saved trends, and explore how your selected topics are behaving!',\n                second_text: 'Click to view your Saved Trends!',\n\n                route: '/saved'\n            },\n            cards: [{\n                    id: 'topics',\n                    title: 'What is Topics?',\n                    text: 'Sometimes, you just need to see the big picture. On the Topics page, you can explore the most popular news topics however you want. Adjust the time period, and filter by media outlets, to view which topics are the most prominent in the media landscape.',\n                    second_text: 'Click to go to Topics!',\n\n                    route: '/topics'\n                },\n                {\n                    id: 'trends',\n                    title: 'What is Trends?',\n                    text: 'Looking to see how news topics change in relation to each other? Head to the Trends page to view the popularity of selected topics over time on a line graph. You can register an account for additional features, such as saving Trends configurations for later and selecting additional topics.',\n                    second_text: 'Click to go to Trends!',\n                    route: '/trends'\n                }\n            ],\n            totd: {\n                id: null,\n                topicname: null,\n                numofarticles: null\n            }\n        }\n    },\n\n    apollo: {\n        totd: {\n            query: GET_TOP_TOPIC,\n            variables() {\n                return {\n                    limit: 1,\n                    // The $to and $from here are pre-set for submission\n                    startDate: \"2020-11-11\",\n                    endDate: \"2020-11-11\",\n                    // // If the database has been updated for the current date, pass the current date as argument\n                    // to: (new Date()).toISOString().slice(0, 10),\n                    // from: (new Date()).toISOString().slice(0, 10),\n                }\n            },\n            update(data) {\n                return data.gettoptopic;\n            }\n        },\n        user : {\n            query: CHECK_USER,\n            variables() {\n                return {\n                    userId: this.user_id\n                }\n            },\n            update(data) {\n                return data;\n            },\n            skip() {\n                return this.skipQuery\n            },\n        }\n    },\n\n    methods: {\n        ...mapMutations([\n            'openTopic',\n            'searchTopicKeyword'\n\n        ]),\n        async createUser() {\n            var userId = this.$auth.user.sub\n            this.user_id = userId\n\n            this.$apollo.queries.user.skip = false\n            await this.$apollo.queries.user.refetch()\n            if (this.user.allUsers.nodes.length == 0) {\n                this.$apollo.mutate({\n                    mutation: CREATE_USER,\n                    variables: {\n                        userId\n                    }\n                })\n                console.log(\"New User: \", userId)\n            } else {\n                console.log(\"Existing User: \", userId)\n            }\n            \n        },\n        async login() {\n            await this.$auth.loginWithPopup();\n            this.createUser();\n        },\n        logout() {\n            this.$auth.logout({\n                returnTo: window.location.origin\n            });\n        },\n        open(topic) {\n            this.popup = true\n            this.openTopic({\n                id: topic.id,\n                name: topic.topicname\n            })\n        },\n        searchTopic() {\n            this.search = true\n            this.searchTopicKeyword(this.keyword)\n        },\n\n    },\n    computed: {\n            \n        show: {\n            get() {\n                return this.value\n            },\n            set(value) {\n                this.$emit('input', value)\n            }\n        }\n    },\n}\n</script>\n\n<style>\n.card-outter {\n    position: relative;\n    padding-bottom: 50px;\n}\n.card-actions {\n    position: relative;\n\n    bottom: 0;\n}\n</style>\n"]}]}