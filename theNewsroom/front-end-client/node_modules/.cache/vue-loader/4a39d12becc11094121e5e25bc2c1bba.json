{"remainingRequest":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/src/components/common/Header.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/src/components/common/Header.vue","mtime":1605530430592},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDUkVBVEVfVVNFUiBmcm9tICcuLi8uLi9ncmFwaHFsL2NyZWF0ZVVzZXIuZ3FsJwppbXBvcnQgQ0hFQ0tfVVNFUiBmcm9tICcuLi8uLi9ncmFwaHFsL2NoZWNrVXNlci5ncWwnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiSGVhZGVyIiwKICAgIGRhdGE6ICgpID0+ICh7CiAgICAgICAgYXV0aDogdHJ1ZSwKICAgICAgICBkcmF3ZXI6IGZhbHNlLAogICAgICAgIHNhdmVkOiB7CiAgICAgICAgICAgIGljb246ICdzYXZlZCcsCiAgICAgICAgICAgIHRpdGxlOiAnU2F2ZWQgVHJlbmRzJywKICAgICAgICAgICAgcm91dGU6ICcvc2F2ZWQnCiAgICAgICAgfSwKICAgICAgICBtZW51OiBbewogICAgICAgICAgICAgICAgaWNvbjogJ3RvcGljcycsCiAgICAgICAgICAgICAgICB0aXRsZTogJ1RvcGljcycsCiAgICAgICAgICAgICAgICByb3V0ZTogJy90b3BpY3MnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGljb246ICd0cmVuZHMnLAogICAgICAgICAgICAgICAgdGl0bGU6ICdUcmVuZHMnLAogICAgICAgICAgICAgICAgcm91dGU6ICcvdHJlbmRzJwogICAgICAgICAgICB9LAogICAgICAgIF0KICAgIH0pLAogICAgYXBvbGxvOiB7CiAgICAgICAgdXNlciA6IHsKICAgICAgICAgICAgcXVlcnk6IENIRUNLX1VTRVIsCiAgICAgICAgICAgIHZhcmlhYmxlcygpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB0aGlzLiRhdXRoLnVzZXIuc3ViCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZShkYXRhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2tpcCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNraXBRdWVyeQogICAgICAgICAgICB9LAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYXN5bmMgY3JlYXRlVXNlcigpIHsKICAgICAgICAgICAgdmFyIHVzZXJJZCA9IHRoaXMuJGF1dGgudXNlci5zdWIKICAgICAgICAgICAgdGhpcy4kYXBvbGxvLnF1ZXJpZXMudXNlci5za2lwID0gZmFsc2UKICAgICAgICAgICAgYXdhaXQgdGhpcy4kYXBvbGxvLnF1ZXJpZXMudXNlci5yZWZldGNoKCkKICAgICAgICAgICAgaWYgKHRoaXMudXNlci5hbGxVc2Vycy5ub2Rlcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgbXV0YXRpb246IENSRUFURV9VU0VSLAogICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIk5ldyBVc2VyOiAiLCB1c2VySWQpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXhpc3RpbmcgVXNlcjogIiwgdXNlcklkKQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9naW4oKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuJGF1dGgubG9naW5XaXRoUG9wdXAoKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVVc2VyKCk7CiAgICAgICAgfSwKICAgICAgICBsb2dvdXQoKSB7CiAgICAgICAgICAgIHRoaXMuJGF1dGgubG9nb3V0KHsKICAgICAgICAgICAgICAgIHJldHVyblRvOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sCiAgICAKfQo="},{"version":3,"sources":["Header.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Header.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n<v-toolbar class=\"toolbar\" fixed flat max-height=\"65\" dark>\n    <v-btn text>\n        <v-toolbar-title class=\"text-uppercase\">\n            <router-link to=\"/\">\n                <span class=\"font-weight-light white--text\">The</span>\n                <span class=\"white--text\">Newsroom</span>\n            </router-link>\n        </v-toolbar-title>\n    </v-btn>\n    <v-spacer />\n\n    <!-- Full screen size -->\n    <v-toolbar-items class=\"d-none d-md-block\">\n        <v-btn text depressed to='/topics'>Topics</v-btn>\n        <v-btn text depressed to='/trends'>Trends</v-btn>\n        <v-btn text depressed v-if=\"!$auth.loading && !$auth.isAuthenticated\" @click=\"login\">Log In / Register</v-btn>\n        <v-btn v-if=\"!$auth.loading && $auth.isAuthenticated\" depressed to='/saved'>Saved</v-btn>\n        <v-btn v-if=\"!$auth.loading && $auth.isAuthenticated\" text depressed @click=\"logout\">Log Out</v-btn>\n\n    </v-toolbar-items>\n\n    <!-- Small screen size -->\n    <div class=\"d-md-none\">\n        <v-menu>\n            <template v-slot:activator=\"{ on }\">\n                <v-app-bar-nav-icon v-on=\"on\" />\n            </template>\n            <v-list class=\"responsiveMenu\" size=\"auto\">\n                <v-list-item text v-for=\"item in menu\" :key=\"item.icon\" :to=\"item.route\" depressed v-text='item.title' />\n                <template v-if=\"!$auth.loading && !$auth.isAuthenticated\">\n                    <v-list-item text @click=\"login\">\n                        Log In\n                    </v-list-item>\n                    <v-list-item text @click=\"login\">\n                        Register\n                    </v-list-item>\n                </template>\n                <template v-else>\n                    <v-list-item text to='/saved'>\n                        Saved\n                    </v-list-item>\n                    <v-list-item text @click=\"logout\">\n                        Log Out\n                    </v-list-item>\n                </template>\n            </v-list>\n        </v-menu>\n    </div>\n\n</v-toolbar>\n</template>\n\n<script>\nimport CREATE_USER from '../../graphql/createUser.gql'\nimport CHECK_USER from '../../graphql/checkUser.gql'\n\nexport default {\n    name: \"Header\",\n    data: () => ({\n        auth: true,\n        drawer: false,\n        saved: {\n            icon: 'saved',\n            title: 'Saved Trends',\n            route: '/saved'\n        },\n        menu: [{\n                icon: 'topics',\n                title: 'Topics',\n                route: '/topics'\n            },\n            {\n                icon: 'trends',\n                title: 'Trends',\n                route: '/trends'\n            },\n        ]\n    }),\n    apollo: {\n        user : {\n            query: CHECK_USER,\n            variables() {\n                return {\n                    userId: this.$auth.user.sub\n                }\n            },\n            update(data) {\n                return data;\n            },\n            skip() {\n                return this.skipQuery\n            },\n        }\n    },\n    methods: {\n        async createUser() {\n            var userId = this.$auth.user.sub\n            this.$apollo.queries.user.skip = false\n            await this.$apollo.queries.user.refetch()\n            if (this.user.allUsers.nodes.length == 0) {\n                this.$apollo.mutate({\n                    mutation: CREATE_USER,\n                    variables: {\n                        userId\n                    }\n                })\n                console.log(\"New User: \", userId)\n            } else {\n                console.log(\"Existing User: \", userId)\n            }\n            \n        },\n        async login() {\n            await this.$auth.loginWithPopup();\n            this.createUser();\n        },\n        logout() {\n            this.$auth.logout({\n                returnTo: window.location.origin\n            });\n        }\n    },\n    \n}\n</script>\n\n<style scoped>\n.v-toolbar.v-toolbar--absolute {\n    width: auto;\n    height: auto;\n}\n</style>\n"]}]}