{"remainingRequest":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/babel-loader/lib/index.js!/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/eslint-loader/index.js??ref--13-0!/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/src/auth/authGuard.js","dependencies":[{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/src/auth/authGuard.js","mtime":1605530430589},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0SW5zdGFuY2UgfSBmcm9tICIuL2luZGV4IjsKZXhwb3J0IHZhciBhdXRoR3VhcmQgPSBmdW5jdGlvbiBhdXRoR3VhcmQodG8sIGZyb20sIG5leHQpIHsKICB2YXIgYXV0aFNlcnZpY2UgPSBnZXRJbnN0YW5jZSgpOwoKICB2YXIgZm4gPSBmdW5jdGlvbiBmbigpIHsKICAgIC8vIElmIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQsIGNvbnRpbnVlIHdpdGggdGhlIHJvdXRlCiAgICBpZiAoYXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKSB7CiAgICAgIHJldHVybiBuZXh0KCk7CiAgICB9IC8vIE90aGVyd2lzZSwgbG9nIGluCgoKICAgIGF1dGhTZXJ2aWNlLmxvZ2luV2l0aFJlZGlyZWN0KHsKICAgICAgYXBwU3RhdGU6IHsKICAgICAgICB0YXJnZXRVcmw6IHRvLmZ1bGxQYXRoCiAgICAgIH0KICAgIH0pOwogIH07IC8vIElmIGxvYWRpbmcgaGFzIGFscmVhZHkgZmluaXNoZWQsIGNoZWNrIG91ciBhdXRoIHN0YXRlIHVzaW5nIGBmbigpYAoKCiAgaWYgKCFhdXRoU2VydmljZS5sb2FkaW5nKSB7CiAgICByZXR1cm4gZm4oKTsKICB9IC8vIFdhdGNoIGZvciB0aGUgbG9hZGluZyBwcm9wZXJ0eSB0byBjaGFuZ2UgYmVmb3JlIHdlIGNoZWNrIGlzQXV0aGVudGljYXRlZAoKCiAgYXV0aFNlcnZpY2UuJHdhdGNoKCJsb2FkaW5nIiwgZnVuY3Rpb24gKGxvYWRpbmcpIHsKICAgIGlmIChsb2FkaW5nID09PSBmYWxzZSkgewogICAgICByZXR1cm4gZm4oKTsKICAgIH0KICB9KTsKfTs="},{"version":3,"sources":["/Users/liamdale/OneDrive/Uni/COMP/20T3/capstone-project-comp3900-w17a-212-monolith/212MonolithFinalSoftwareQuality/theNewsroom/front-end-client/src/auth/authGuard.js"],"names":["getInstance","authGuard","to","from","next","authService","fn","isAuthenticated","loginWithRedirect","appState","targetUrl","fullPath","loading","$watch"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AAEA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAC3C,MAAMC,WAAW,GAAGL,WAAW,EAA/B;;AAEA,MAAMM,EAAE,GAAG,SAALA,EAAK,GAAM;AACf;AACA,QAAID,WAAW,CAACE,eAAhB,EAAiC;AAC/B,aAAOH,IAAI,EAAX;AACD,KAJc,CAMf;;;AACAC,IAAAA,WAAW,CAACG,iBAAZ,CAA8B;AAAEC,MAAAA,QAAQ,EAAE;AAAEC,QAAAA,SAAS,EAAER,EAAE,CAACS;AAAhB;AAAZ,KAA9B;AACD,GARD,CAH2C,CAa3C;;;AACA,MAAI,CAACN,WAAW,CAACO,OAAjB,EAA0B;AACxB,WAAON,EAAE,EAAT;AACD,GAhB0C,CAkB3C;;;AACAD,EAAAA,WAAW,CAACQ,MAAZ,CAAmB,SAAnB,EAA8B,UAAAD,OAAO,EAAI;AACvC,QAAIA,OAAO,KAAK,KAAhB,EAAuB;AACrB,aAAON,EAAE,EAAT;AACD;AACF,GAJD;AAKD,CAxBM","sourcesContent":["import { getInstance } from \"./index\";\n\nexport const authGuard = (to, from, next) => {\n  const authService = getInstance();\n\n  const fn = () => {\n    // If the user is authenticated, continue with the route\n    if (authService.isAuthenticated) {\n      return next();\n    }\n\n    // Otherwise, log in\n    authService.loginWithRedirect({ appState: { targetUrl: to.fullPath } });\n  };\n\n  // If loading has already finished, check our auth state using `fn()`\n  if (!authService.loading) {\n    return fn();\n  }\n\n  // Watch for the loading property to change before we check isAuthenticated\n  authService.$watch(\"loading\", loading => {\n    if (loading === false) {\n      return fn();\n    }\n  });\n};"]}]}